# Описание полного функционала и взаимодействий между системами для Telegram-бота

## Общий функционал:
Проект реализует Telegram-бота, чья основная задача — автоматическое формирование и публикация новостных сообщений. Бот обрабатывает новости, получает их с англоязычных ресурсов, переводит, форматирует и публикует в канал, выделяя ключевые моменты для удобства чтения.

## Закономерности между системами:
Проект построен на принципах модульной структуры и разделения логики, что позволяет поддерживать код и расширять его функционал. Основные компоненты и их взаимодействие описаны ниже.

1. **Telegram API (библиотека python-telegram-bot):**
   - Используется для отправки сообщений в Telegram-канал.
   - Основные части:
     - `Updater` и `Dispatcher` обеспечивают связь между ботом и каналом, отслеживая обновления и отправляя сообщения.
   - Закономерность:
     - `Updater` отслеживает процесс отправки сообщений, а `Dispatcher` помогает регистрировать обработчики для выполнения отправки.

2. **CryptoCompare API для новостей о криптовалютах:**
   - Основной источник англоязычных новостей о криптовалютах.
   - Закономерность:
     - Ссылка на API (`CRYPTO_API_URL`) хранится в `config.py`.
     - Для интеграции создается функция `fetch_crypto_news()`, которая запрашивает новости и обрабатывает полученные данные.
     - В ответе API возвращаются краткие тексты, которые бот берет для последующей обработки.

3. **Перевод новостей (API-переводчик):**
   - Используется для перевода англоязычных новостей на нужный язык.
   - Закономерность:
     - Создается функция `translate_text()`, которая отправляет текст новости на перевод.
     - Переведенные тексты передаются в следующую функцию, где они проходят обработку и подготовку для публикации.
   
4. **OpenAI API для генерации формата и ключевых акцентов:**
   - Позволяет отформатировать текст новости с выделением ключевых моментов.
   - Закономерность:
     - Ключ API (`OPENAI_API_KEY`) хранится в `config.py`.
     - Для интеграции создается функция `format_news_with_gpt()`, которая отправляет перевод новости в OpenAI.
     - OpenAI обрабатывает текст, делает его компактным и выделяет ключевые моменты, добавляя жирный текст для акцентов.
   
5. **Конфигурация (config.py):**
   - Содержит настройки, такие как `BOT_TOKEN`, `CHANNEL_ID`, `CRYPTO_API_URL`, `OPENAI_API_KEY`.
   - Закономерность:
     - Конфигурация отделена от основной логики, позволяя изменять данные без вмешательства в код.
   
## Поток данных и взаимодействие систем:
1. **Запрос новостей**:
   - Бот автоматически отправляет запрос к CryptoCompare API для получения новостей на английском языке.
2. **Перевод текста**:
   - Полученная новость отправляется в функцию `translate_text()` для перевода.
3. **Форматирование и обработка**:
   - Переведенный текст направляется в OpenAI API, где формируется сообщение:
     - Текст сокращается до 8-12 слов в каждом из трех блоков.
     - Ключевые слова выделяются жирным для акцента.
4. **Публикация в Telegram**:
   - Бот формирует сообщение из трех блоков новостей и отправляет его в канал Telegram.

## Заключение:
Структура и взаимосвязь систем поддерживают четкий функционал бота. Такой подход позволяет обрабатывать новости и публиковать их в удобном для восприятия формате, выделяя ключевые моменты, что делает проект легко масштабируемым и поддерживаемым.
